 Gemini
Play GTA 5 on CachyOS via xCloud
https://gemini.google.com/share/a08c4989b110
Created with Fast February 21, 2026 at 03:19 AM Published February 21, 2026 at 07:02 AM
You said

I'm on CachyOS Linux, Can I play GTA 5 via xcloud?

Yes, you absolutely can! Since CachyOS is a high-performance Arch-based Linux distribution, you are in a great position to get a smooth experience.

As of early 2026, GTA V has returned to the Xbox Game Pass library and is officially supported for Xbox Cloud Gaming (xCloud). Since xCloud runs in a browser, it bypasses the typical Linux compatibility hurdles like anti-cheat or Windows-only launchers.
How to Set It Up on CachyOS

Because CachyOS uses the optimized linux-cachyos kernel, you‚Äôll likely experience lower latency than on standard distros. Here is the best way to get it running:
1. Choose Your Browser

For the best performance on Linux, use a Chromium-based browser.

    Microsoft Edge (Flatpak): Often recommended because Microsoft adds specific "Clarity Boost" features for xCloud here.

    Google Chrome / Brave: These work perfectly fine as well.

    Note: Avoid Firefox for xCloud; it often suffers from higher input lag and lower bitrates on Linux.

2. Controller Configuration

CachyOS usually handles controllers (Xbox, DualSense, etc.) out of the box. However, if your browser doesn't "see" your controller, you may need to give it permission:

    If using the Flatpak version of a browser, install Flatseal and ensure the browser has permission to access /run/udev and "All system files."

3. Improving the Experience

Since you are on a rolling release like CachyOS, make sure your system is fully updated to get the latest driver optimizations:
Bash

sudo pacman -Syu

To make it feel like a native app, you can "Install" the page as a PWA (Progressive Web App):

    Navigate to xbox.com/play.

    Click the three dots in your browser menu.

    Select Apps > Install this site as an app.

Pro Tips for xCloud on Linux

    Better xCloud: I highly recommend the Better xCloud script/extension. it allows you to force a 1080p stream, see your ping in real-time, and even use a Mouse & Keyboard on games that usually require a controller.

    Wired is King: Even with CachyOS's network optimizations, a 5GHz Wi-Fi or Ethernet connection is highly recommended to avoid "stuttering" in Los Santos.

Would you like me to help you find the specific terminal commands to install Microsoft Edge or a controller driver for your specific hardware?
You said

I have a newer xbox controller. Sure what are the commands?

To get your newer Xbox controller (Series X|S or One) working perfectly on CachyOS, you'll want to ensure the drivers are optimized and the browser is ready.

Since CachyOS is Arch-based, we have access to xpadneo, which is the gold-standard driver for Xbox controllers on Linux, specifically fixing Bluetooth mapping and rumble issues.
1. Install the Xbox Controller Driver

Open your terminal and run the following to install xpadneo. This driver handles the newer Bluetooth LE (Low Energy) protocols used by Series X|S controllers.
Bash

sudo pacman -S xpadneo-dkms

After installing, it is best to reboot to ensure the new kernel module is loaded.
2. Install Microsoft Edge (for xCloud)

While you can use Chrome, Edge is generally preferred for xCloud due to "Clarity Boost." On CachyOS, the easiest way to get the most stable version is via Flatpak.

If you don't have Flatpak enabled yet:
Bash

sudo pacman -S flatpak

Then install Edge:
Bash

flatpak install flathub com.microsoft.Edge

3. Fix Controller Permissions (Important!)

Browsers installed via Flatpak often have "sandboxed" permissions that prevent them from seeing your controller. You can fix this with a single command:
Bash

flatpak override com.microsoft.Edge --device=all

4. Connect via Bluetooth

If you are using Bluetooth, newer Xbox controllers sometimes struggle to stay connected due to "Early Renew" features in Linux. If your controller keeps disconnecting, run this command to disable that specific Bluetooth power-saving feature:
Bash

sudo sh -c 'echo "options bluetooth disable_ertm=1" > /etc/modprobe.d/bluetooth.conf'

Summary Checklist:

    Pair the controller via your Bluetooth settings.

    Open Edge and go to xbox.com/play.

    Check for the controller icon in the top right of the xCloud dashboard.

A quick tip: If your controller is still acting weird, you might need to update its firmware. Unfortunately, that requires the "Xbox Accessories" app on a Windows PC or an actual Xbox console.

Would you like the commands to install the Better xCloud script to unlock 1080p streaming?
You said

‚ùØ sudo pacman -S xpadneo-dkms

[sudo] password for rich:

resolving dependencies...

looking for conflicting packages...


Package (1)           New Version  Net Change  Download Size


cachyos/xpadneo-dkms  0.9.8-1        0.05 MiB       0.02 MiB


Total Download Size:   0.02 MiB

Total Installed Size:  0.05 MiB


:: Proceed with installation? [Y/n] y

:: Retrieving packages...

 xpadneo-dkms-0.9.8-1-any   18.1 KiB   130 KiB/s 00:00 [----------------------------] 100%

(1/1) checking keys in keyring                         [----------------------------] 100%

(1/1) checking package integrity                       [----------------------------] 100%

(1/1) loading package files                            [----------------------------] 100%

(1/1) checking for file conflicts                      [----------------------------] 100%

:: Processing package changes...

(1/1) installing xpadneo-dkms                          [----------------------------] 100%

:: Running post-transaction hooks...

(1/4) Reloading device manager configuration...

(2/4) Arming ConditionNeedsUpdate...

(3/4) Install DKMS modules

==> dkms install --no-depmod hid-xpadneo/v0.9.8 -k 6.18.13-2-cachyos-lts

==> dkms install --no-depmod hid-xpadneo/v0.9.8 -k 6.19.3-2-cachyos

==> depmod 6.19.3-2-cachyos

==> depmod 6.18.13-2-cachyos-lts

(4/4) Updating linux initcpios...

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos-lts.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos-lts -g /boot/initramfs-linux-cachyos-lts.img

==> ERROR: Invalid option -k -- '/boot/vmlinuz-linux-cachyos-lts' must be readable

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos -g /boot/initramfs-linux-cachyos.img

==> ERROR: Invalid option -g -- '/boot/initramfs-linux-cachyos.img' must be writable

error: command failed to execute correctly


~

It looks like the installation hit a snag because the mkinitcpio hook (which updates your boot images) ran into a permissions or path error. This is fairly common on Arch-based systems when a kernel update happened recently but the system hasn't been rebooted, or if the hook is trying to write to /boot without the right environment.

The good news is that xpadneo usually works fine even if the initcpio part fails, as it's a dynamic module. However, we should clean this up to ensure your controller (and your system) boots correctly.
1. Fix the Permissions/Update

The error must be readable/writable usually means the script is having trouble accessing your boot partition. Try running a manual update of your boot images with sudo:
Bash

sudo mkinitcpio -P

If that still gives an error, try syncing your file system and reinstalling the headers to make sure everything matches:
Bash

sudo pacman -S linux-cachyos-headers linux-cachyos-lts-headers

2. Check if xpadneo Loaded

You might not even need to fix the mkinitcpio error for the controller to work right now. Try to manually load the module:
Bash

sudo modprobe hid-xpadneo

    If it returns no error: You're good to go!

    If it says "Module not found": A reboot is required because your running kernel version and the installed module version are out of sync.

3. Pairing the Controller

Since you have a newer Xbox controller, pairing via Bluetooth on Linux sometimes requires a specific sequence.

    Open your Bluetooth settings in CachyOS (KDE or GNOME).

    Hold the Pair button on the top of the controller until the Xbox logo flashes rapidly.

    Select "Xbox Wireless Controller" on your screen.

4. Better xCloud (The "Secret Sauce")

Since you're ready to play GTA V, you definitely want this. It fixes the blurry stream quality and adds controller features.

To install it:

    Install the Tampermonkey extension in your browser (Edge or Chrome).

    Go to the Better xCloud GitHub and click Install.

    Open xbox.com/play ‚Äî you'll see a new "Better xCloud" menu icon in the top left.

        Pro Tip: Set the "High Quality" preset and enable the "Controller Overlay" to test your buttons.

Would you like me to show you how to check if your controller's "deadzones" are correct once you're connected? (GTA V can be a bit sensitive to stick drift on cloud streams).
You said

‚ùØ sudo mkinitcpio -P

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos-lts.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos-lts -g /boot/initramfs-linux-cachyos-lts.img

==> ERROR: Invalid option -k -- '/boot/vmlinuz-linux-cachyos-lts' must be readable

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos -g /boot/initramfs-linux-cachyos.img

==> ERROR: Invalid option -g -- '/boot/initramfs-linux-cachyos.img' must be writable


~

This error is a bit of a "hiccup" in how CachyOS's presets are interacting with your current environment. The Invalid option -k error usually happens when mkinitcpio is fed a path that doesn't exist or is inaccessible (likely because your boot partition isn't mounted or the kernel files were moved during an update).

Since we just want to play GTA V, we can bypass this headache for now. xpadneo (your controller driver) is a DKMS module, meaning it builds itself for your kernel without needing to be baked into the initramfs boot image immediately.
Step 1: Check if the driver is actually working

Run this to see if the driver is loaded despite the error:
Bash

lsmod | grep xpadneo

    If you see output: The driver is active! You can skip the errors and start gaming.

    If nothing shows up: Try to force load it: sudo modprobe hid-xpadneo.

Step 2: The "CachyOS Way" to fix the Boot Error

If you want to clear those errors, the issue is likely that your /boot partition isn't mounted properly (common if you use systemd-boot or specialized partitions). Try this:

    Check your mount: ```bash
    ls /boot

    If you don't see files like `vmlinuz-linux-cachyos`, your boot partition isn't mounted. Run `sudo mount -a` and try `sudo mkinitcpio -P` again.

    Use CachyOS's built-in tool: CachyOS has a GUI and CLI tool that handles kernel maintenance better than raw commands sometimes. Open your terminal and run:
    Bash

    cachyos-hello

    Go to Navigate to "System Update" or "Rank Mirrors" and let it run a sync. This often triggers a clean rebuild of the kernel images that bypasses manual script errors.

Step 3: Verify the Controller for GTA V

Once you pair the controller via Bluetooth, you should verify it‚Äôs being mapped correctly before you launch xCloud.

    Open your browser and go to gamepad-tester.com.

    Press any button on your Xbox controller.

    Crucial for GTA V: Ensure the RT and LT (triggers) show a range from 0.00 to 1.00. If they act like simple on/off buttons, GTA V driving will be nearly impossible. xpadneo usually fixes this automatically.

Step 4: Launching the Game

    Open Edge (or your browser).

    Go to xbox.com/play.

    Sign in, find Grand Theft Auto V, and hit Play.

One last tip for GTA V on xCloud: Since it's a stream, the game might feel a bit "heavy." In the GTA V in-game settings, go to Settings > Controls and turn the Look Sensitivity up and the Deadzone down to 0. This helps mask the slight network latency.

Would you like me to help you set up a desktop shortcut so you can launch GTA V directly from your CachyOS app menu?
You said

‚ùØ sudo mount -a

‚ùØ sudo mkinitcpio -P

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos-lts.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos-lts -g /boot/initramfs-linux-cachyos-lts.img

==> ERROR: Invalid option -k -- '/boot/vmlinuz-linux-cachyos-lts' must be readable

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos -g /boot/initramfs-linux-cachyos.img

==> ERROR: Invalid option -g -- '/boot/initramfs-linux-cachyos.img' must be writable


~

‚ùØ

It looks like your CachyOS configuration files (the .preset files) are formatted incorrectly or are corrupted. The error Invalid option -k followed by the file path suggests the script is misinterpreting the command structure, likely due to a syntax error inside the files in /etc/mkinitcpio.d/.

However, you don't actually need to fix this to play GTA V. Since you successfully ran sudo pacman -S xpadneo-dkms, the driver was built. As long as you aren't trying to boot a brand-new kernel right this second, your controller should work.
Step 1: Force Load the Driver

Let's skip the boot-image headache and just turn the driver on:
Bash

sudo modprobe hid-xpadneo

Then, check if it's active:
Bash

lsmod | grep xpadneo

If you see hid_xpadneo in the list, you are ready to play.
Step 2: Connect and Test

    Pair your controller via your Bluetooth settings.

    Go to Gamepad Tester in your browser.

    Move the sticks. If the "Axis" bars move, your Linux OS is successfully communicating with the controller.

Step 3: Launch GTA V on xCloud

    Open your browser (Edge or Chrome).

    Go to xbox.com/play.

    Sign in and launch GTA V.

    Note: Since it's a cloud game, the "Xbox" button on your controller might open your Linux "Start" menu instead of the in-game menu. To fix this, use the Full Screen mode in the browser (usually F11).

If you want to fix that mkinitcpio error later:

The preset files in /etc/mkinitcpio.d/ likely have an extra space or a missing quote. You can usually fix them by reinstalling the kernel packages, which regenerates those presets:
Bash

sudo pacman -S linux-cachyos linux-cachyos-headers

Would you like me to give you the specific settings for "Better xCloud" to make GTA V look less blurry on your screen?
You said

No I dont want there to be a problem when I boot

I hear you‚ÄîI'd be nervous too. In Linux, if mkinitcpio (the tool that builds your boot files) fails, it can sometimes mean your system won't have the necessary "map" to find your hardware the next time you turn it on.

The error you're seeing (Invalid option -k) usually points to a syntax error in your preset files. This sometimes happens on CachyOS if a config file gets corrupted or if a weird character (like a stray quote) was added during an update.

Here is how to fix it safely so you can boot without worry.
1. Identify the Broken File

The error is coming from files in /etc/mkinitcpio.d/. Let‚Äôs look at them:
Bash

ls /etc/mkinitcpio.d/

You should see linux-cachyos.preset and linux-cachyos-lts.preset.
2. The "Nuclear" (But Safe) Fix

The most reliable way to fix corrupted presets on CachyOS is to delete them and let the system regenerate them correctly by reinstalling the kernels. Do not reboot until you finish these steps.

Run these one by one:

    Remove the potentially broken presets:
    Bash

    sudo rm /etc/mkinitcpio.d/linux-cachyos.preset
    sudo rm /etc/mkinitcpio.d/linux-cachyos-lts.preset

    Reinstall the kernels (This forces CachyOS to recreate clean presets):
    Bash

    sudo pacman -S linux-cachyos linux-cachyos-headers linux-cachyos-lts linux-cachyos-lts-headers

    Watch the terminal output. This time, it should say "Building image from preset" and show progress bars (0%... 100%) without the "-k" or "-g" errors.

3. Verify the Fix

Once the command above finishes, run the manual builder one last time to be 100% sure:
Bash

sudo mkinitcpio -P

If it finishes with no errors (no red text), your system is officially safe to boot.
Why this happened?

It‚Äôs a known quirk where CachyOS‚Äôs automated scripts sometimes misconfigure the "preset" file if the boot partition wasn't perfectly mounted during a previous update. By deleting those small config files and reinstalling the kernel, you‚Äôre essentially "resetting" the boot instructions to factory defaults.

Once you get a clean mkinitcpio -P run, you can relax and get back to GTA V!

Would you like me to wait here while you run those commands to make sure everything clears up?
You said

:: Running post-transaction hooks...

(1/6) Arming ConditionNeedsUpdate...

(2/6) Updating module dependencies...

(3/6) Install DKMS modules

==> dkms install --no-depmod zfs/2.4.0 -k 6.18.13-2-cachyos-lts


==> dkms install --no-depmod hid-xpadneo/v0.9.8 -k 6.18.13-2-cachyos-lts

==> dkms install --no-depmod hid-xpadneo/v0.9.8 -k 6.19.3-2-cachyos

==> dkms install --no-depmod zfs/2.4.0 -k 6.19.3-2-cachyos

==> WARNING: `dkms install --no-depmod zfs/2.4.0 -k 6.19.3-2-cachyos' exited 1

==> depmod 6.19.3-2-cachyos

==> depmod 6.18.13-2-cachyos-lts

(4/6) Updating linux initcpios...

install: cannot create regular file '/boot/vmlinuz-linux-cachyos-lts': Read-only file system

error: command failed to execute correctly

(5/6) Check if user should be informed about rebooting after certain system package upgrades.

==> INFO: Reboot is recommended due to the upgrade of core system package(s).

(6/6) Checking which packages need to be rebuilt


~

Okay, we‚Äôve found the root cause: Your boot partition (/boot) has flipped into "Read-only" mode. This usually happens as a safety measure by the Linux kernel if it detects a file system error or if the drive wasn't unmounted properly. This is why mkinitcpio couldn't write the files and gave you those weird "must be writable" errors.

Do not reboot yet. We need to make /boot writable again so the kernel images can be saved correctly.
Step 1: Force Remount as Read-Write

Run this command to tell the system to ignore the "read-only" flag and try to open it up for writing:
Bash

sudo mount -o remount,rw /boot

Step 2: Check if it worked

Try to create a tiny temporary file to see if the "Read-only" error is gone:
Bash

sudo touch /boot/testfile && sudo rm /boot/testfile

    If no error: Great! Move to Step 3.

    If it still says "Read-only": Your file system might have an error that needs fixing. Run:
    Bash

    sudo fsck -y /boot

    (Then try the remount command from Step 1 again).

Step 3: Finish the Kernel Install

Now that the drive is (hopefully) writable, let's finish the job that failed earlier:
Bash

sudo mkinitcpio -P

If this command finishes without "Read-only" or "Invalid option" errors, your system is safe to reboot. ---
A Note on the ZFS Warning

You saw a warning about zfs/2.4.0 exiting with 1. Unless you are specifically using a ZFS file system for your main drives, you can safely ignore this for now. The important part is getting vmlinuz (the kernel) and initramfs (the boot instructions) written to /boot.
Why did this happen?

Sometimes, if a system update is interrupted or if there's a slight hiccup with the NVMe/SSD communication, Linux "locks" the boot partition to prevent data corruption.

Once mkinitcpio -P finishes successfully, you‚Äôll be all set to reboot and finally jump into GTA V! How did the mount -o remount,rw /boot command go? Any errors there?
You said

‚ùØ sudo mount -o remount,rw /boot

‚ùØ sudo touch /boot/testfile && sudo rm /boot/testfile

touch: cannot touch '/boot/testfile': Input/output error

‚ùØ sudo fsck -y /boot

fsck from util-linux 2.41.3

fsck.fat 4.2 (2021-01-31)

There are differences between boot sector and its backup.

This is mostly harmless. Differences: (offset:original/backup)

  65:01/00

  Not automatically fixing this.

Both FATs appear to be corrupt. Giving up. Run fsck.fat with non-zero -F option.


~

‚ùØ

This is a bit more serious than a simple configuration error, but it is fixable. The Input/output error and the Corrupt FATs message mean your EFI/Boot partition (where the kernel lives) has file system corruption. Linux locked it to "Read-Only" to prevent further damage.

Because your mkinitcpio failed to write the kernel files, do not reboot yet, or the system might not find the kernel to start up. We need to repair that partition now.
Step 1: Repair the Boot Partition

Since it's a FAT32 partition (standard for EFI), we need to use the -w (write) and -r (interactive/repair) flags to force a fix.

Run this command:
Bash

sudo fsck.fat -a -w -v /dev/sda1

    Note: I used /dev/sda1 as a guess. To be 100% sure which partition is your boot drive, run lsblk first. Look for the one mounted at /boot. Replace /dev/sda1 with whatever yours is (e.g., /dev/nvme0n1p1).

    The -a will automatically repair, and -w will write the changes immediately.

Step 2: Remount and Test again

Once the repair finishes, try to make it writable again:
Bash

sudo mount -o remount,rw /boot
sudo touch /boot/testfile && sudo rm /boot/testfile

If touch works now without an "Input/output error," the "physical" hurdle is cleared.
Step 3: Re-generate the Boot Images (The "Safety" Step)

Now that the drive is healthy, we must ensure the boot files are actually there. Run:
Bash

sudo mkinitcpio -P

Watch for the output. You want to see "Image generation successful" for both the LTS and standard CachyOS kernels.
What if Step 1 fails?

If fsck.fat says it still cannot fix it, the partition might be physically failing or severely scrambled. In that case:

    Back up any files you can from /boot to a folder in your Home directory.

    We may need to format that specific partition and reinstall the grub or systemd-boot loader, but let's try the fsck repair first.

How did the fsck.fat command respond? Did it report that it fixed the "differences between boot sector and backup"?
You said

‚ùØ sudo fsck.fat -a -w -v /dev/sda1

fsck.fat 4.2 (2021-01-31)

open: No such file or directory


~

‚ùØ

Ah, that's my fault‚ÄîI used a placeholder drive name. On modern systems (especially NVMe drives), the name is usually something like /dev/nvme0n1p1.

Let's find the exact name of your boot partition so we can fix it.
1. Find your Boot Partition Name

Run this command:
Bash

lsblk -o NAME,FSTYPE,SIZE,MOUNTPOINTS

Look for the partition that is mounted at /boot. It will likely be around 512MB to 1GB and have the type vfat.
2. Run the Repair on the Correct Partition

Once you have the name (let's say it's /dev/nvme0n1p1), run the repair command using that specific path:
Bash

sudo fsck.fat -a -w -v /dev/YOUR_PARTITION_NAME

(Replace YOUR_PARTITION_NAME with what you found in step 1, e.g., nvme0n1p1).
3. Finalizing the Safety Check

If that command finishes successfully, we just need to do the "Handshake" to make sure the system is bootable:

    Remount: sudo mount -o remount,rw /boot

    Rebuild: sudo mkinitcpio -P

A quick "Why" on the Error:

The reason you got "No such file or directory" is simply because /dev/sda1 is the name for older SATA hard drives. Most modern CachyOS installs are on NVMe sticks, which use the nvme naming convention.

Tell me what name you found with lsblk, or if the repair command worked! We want to get this green-lit so you can finally stop troubleshooting and start playing GTA.
You said

I usse nvme1n1

Got it. Since your drive is nvme1n1, your boot partition is likely nvme1n1p1 (the first partition on that drive).

Let's fix that file system right now so you can safely reboot.
1. Run the Repair

Run this command to target the specific partition on your NVMe drive:
Bash

sudo fsck.fat -a -w -v /dev/nvme1n1p1

    Note: If it tells you the partition is currently mounted, you can try adding the -l flag to the mount command first (sudo umount -l /boot), but usually, fsck.fat will handle the repair if you've already seen those "Input/output" errors.

2. Make it Writable and Rebuild

Once the repair is done, we need to ensure the boot files are actually written to the disk. If you skip this, the computer might not have a "brain" to boot into next time.

    Remount as Read-Write:
    Bash

    sudo mount -o remount,rw /boot

    Run the Boot Image Creator:
    Bash

    sudo mkinitcpio -P

3. The "All Clear" Signal

If mkinitcpio -P finishes without saying "Error," "Read-only," or "Invalid option," you are 100% safe.
Why did this happen on CachyOS?

NVMe drives are incredibly fast, but if the system power-cycles or hangs while the boot partition is being updated (which happens during kernel updates), the FAT32 file system used for booting can get "dirty." Linux is just being over-protective by locking it.

How did the fsck.fat on nvme1n1p1 go? Once that's clear, you can finally reboot, and your Xbox controller (via the xpadneo driver we installed earlier) will be ready for GTA V.
You said

‚ùØ sudo fsck.fat -a -w -v /dev/nvme1n1p1

fsck.fat 4.2 (2021-01-31)

Checking we can access the last sector of the filesystem

Boot sector contents:

System ID "mkfs.fat"

Media byte 0xf8 (hard disk)

       512 bytes per logical sector

      4096 bytes per cluster

        32 reserved sectors

First FAT starts at byte 16384 (sector 32)

         2 FATs, 32 bit entries

   2093056 bytes per FAT (= 4088 sectors)

Root directory start at cluster 2 (arbitrary size)

Data area starts at byte 4202496 (sector 8208)

    523262 data clusters (2143281152 bytes)

32 sectors/track, 64 heads

      2048 hidden sectors

   4194304 sectors total

Reclaiming unconnected clusters.

Checking free cluster summary.

/dev/nvme1n1p1: 114 files, 4146/523262 clusters

‚ùØ sudo mount -o remount,rw /boot

‚ùØ sudo mkinitcpio -P

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos-lts.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos-lts -g /boot/initramfs-linux-cachyos-lts.img

==> ERROR: Invalid option -k -- '/boot/vmlinuz-linux-cachyos-lts' must be readable


~

That fsck run was successful and fixed the file system errors, but it confirms a theory: your preset files in /etc/mkinitcpio.d/ are definitely malformed. The script is misreading the configuration line and treating the file path as an "invalid option" rather than a parameter.

Since the drive is now healthy and writable, we can fix the logic.
1. The Clean Reset

We need to get rid of those broken configuration files and let the system generate fresh ones. Run these commands:
Bash

# Delete the broken presets
sudo rm /etc/mkinitcpio.d/linux-cachyos.preset
sudo rm /etc/mkinitcpio.d/linux-cachyos-lts.preset

# Reinstall the kernel packages to generate brand new presets
sudo pacman -S linux-cachyos linux-cachyos-lts

2. Verify the Build

Now that the files have been recreated from scratch by the system, try the build again:
Bash

sudo mkinitcpio -P

What to look for:
If it works, you will see a line like ==> Generating module dependencies and ==> Image generation successful. You will not see the -k error.
Why this is happening (The Technical Bit)

In Arch/CachyOS, a .preset file tells mkinitcpio where to find the kernel (-k) and where to save the image (-g). If those files accidentally got saved with "rich text" characters, weird line endings, or if a script messed up the syntax, mkinitcpio sees:
preset_kver='/boot/vmlinuz...'
as
command -k /boot/vmlinuz...
and chokes on it. Deleting them and reinstalling the kernel package is the safest way to "factory reset" those specific boot instructions.

Once mkinitcpio -P finishes successfully, you are 100% safe to reboot. How did the pacman -S command go? Any errors during the "reinstall" phase?
You said

‚ùØ # Delete the broken presets

  sudo rm /etc/mkinitcpio.d/linux-cachyos.preset

  sudo rm /etc/mkinitcpio.d/linux-cachyos-lts.preset


  # Reinstall the kernel packages to generate brand new presets

  sudo pacman -S linux-cachyos linux-cachyos-lts

rm: cannot remove '/etc/mkinitcpio.d/linux-cachyos.preset': No such file or directory

warning: linux-cachyos-6.19.3-2 is up to date -- reinstalling

warning: linux-cachyos-lts-6.18.13-2 is up to date -- reinstalling

resolving dependencies...

looking for conflicting packages...


Package (2)                   Old Version  New Version  Net Change


cachyos-v3/linux-cachyos      6.19.3-2     6.19.3-2       0.00 MiB

cachyos-v3/linux-cachyos-lts  6.18.13-2    6.18.13-2      0.00 MiB


Total Installed Size:  295.55 MiB

Net Upgrade Size:        0.00 MiB


:: Proceed with installation? [Y/n] y

(2/2) checking keys in keyring                         [----------------------------] 100%

(2/2) checking package integrity                       [----------------------------] 100%

(2/2) loading package files                            [----------------------------] 100%

(2/2) checking for file conflicts                      [----------------------------] 100%

:: Processing package changes...

(1/2) reinstalling linux-cachyos                       [----------------------------] 100%

(2/2) reinstalling linux-cachyos-lts                   [----------------------------] 100%

:: Running post-transaction hooks...

(1/5) Arming ConditionNeedsUpdate...

(2/5) Updating module dependencies...

(3/5) Updating linux initcpios...

install: cannot create regular file '/boot/vmlinuz-linux-cachyos-lts': Input/output error

error: command failed to execute correctly

(4/5) Check if user should be informed about rebooting after certain system package upgrades.

==> INFO: Reboot is recommended due to the upgrade of core system package(s).

(5/5) Checking which packages need to be rebuilt

‚ùØ sudo mkinitcpio -P

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos-lts.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos-lts -g /boot/initramfs-linux-cachyos-lts.img

==> ERROR: Invalid option -k -- '/boot/vmlinuz-linux-cachyos-lts' must be readable


~

This is stubborn, but we‚Äôre narrowing it down. The Input/output error returning even after an fsck repair is a giant red flag. It means that while the file system structure was fixed, the actual kernel file (vmlinuz-linux-cachyos-lts) is sitting on a "bad block" or a corrupted sector that the system cannot read or overwrite.

Because the file is unreadable, mkinitcpio sees the path, tries to access it, fails, and then throws that weird "Invalid option" error because it essentially received a "null" or "garbage" response from the drive.

We need to force the drive to let go of that specific corrupted file.
1. The "Force Delete" and Reinstall

Since we can't overwrite it, we have to try to delete the corrupted kernel files manually so pacman can place fresh, healthy ones in their spot.

Run this:
Bash

sudo rm -f /boot/vmlinuz-linux-cachyos*
sudo rm -f /boot/initramfs-linux-cachyos*

2. Check if they are actually gone

Run:
Bash

ls /boot

If you still see vmlinuz-linux-cachyos-lts in the list, the rm failed. This confirms the file system is still locked or the hardware is having a moment.
3. If they are gone, Reinstall Kernels

Now, try the reinstall one more time. This will download fresh copies and try to write them to new sectors on your NVMe:
Bash

sudo pacman -S linux-cachyos linux-cachyos-lts

4. The Final Rebuild

If that finishes without an Input/output error, run the final check:
Bash

sudo mkinitcpio -P

What if it still says "Input/output error"?

If you cannot delete those files or pacman still fails to write to /boot, your EFI partition is likely stuck in a hardware-level error state.

Wait! Don't reboot yet if Step 3 fails. If Step 3 fails, your /boot folder is empty (no kernel), and the computer won't start.

Tell me: Did the sudo rm command in Step 1 give you an error, or did it let you delete those files?
You said

‚ùØ sudo rm -f /boot/vmlinuz-linux-cachyos*

  sudo rm -f /boot/initramfs-linux-cachyos*

fish: No matches for wildcard '/boot/vmlinuz-linux-cachyos*'. See `help language#wildcards-globbing`.

sudo rm -f /boot/vmlinuz-linux-cachyos*

           ^~~~~~~~~~~~~~~~~~~~~~~~~~~^

fish: No matches for wildcard '/boot/initramfs-linux-cachyos*'. See `help language#wildcards-globbing`.

sudo rm -f /boot/initramfs-linux-cachyos*

           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~^

‚ùØ bah

fish: Unknown command: bah

‚ùØ bash

rich@BadBitch:~$ sudo rm -f /boot/vmlinuz-linux-cachyos*

sudo rm -f /boot/initramfs-linux-cachyos*

rich@BadBitch:~$ ls /boot

ls: cannot open directory '/boot': Permission denied

rich@BadBitch:~$ sudo ls /boot

ls: reading directory '/boot': Input/output error

'‚ïôc'$'\016''‚ïù√•'$'\035''‚î§‚ñê.'$'\020''Œ©'  'pu¬•0J_√†œÜ.√©'$'\033''$'  '#'$'\037''r‚ï®m√≥‚â§‚ï™.2@‚î¥'

rich@BadBitch:~$

This is a "stop everything" moment. Look at those filenames in your /boot directory: ‚ïôc'$'\016''‚ïù√•.... That isn't just a configuration error‚Äîthat is severe filesystem corruption (often called "Mojibake" or "garbage text").

When ls shows symbols like that and returns an Input/output error, it means the File Allocation Table (FAT) on your boot partition is scrambled. The reason mkinitcpio is failing is that it literally cannot find a valid place to put the files.

Do not turn off your computer yet. If you reboot now, your BIOS won't be able to read that garbage and the system won't start.
The Plan: Reformat the Boot Partition

Since the filesystem is corrupted beyond a simple fsck repair, we need to wipe the /boot partition and recreate it. Because /boot only contains the kernel and bootloader (not your personal files), this is safe for your data, but critical for booting.
1. Unmount the broken partition
Bash

sudo umount -l /boot

2. Reformat the partition to FAT32

We are going to give it a fresh start. Triple-check that nvme1n1p1 is indeed your EFI partition (based on our previous steps, it is).
Bash

sudo mkfs.fat -F 32 /dev/nvme1n1p1

3. Remount the fresh partition
Bash

sudo mount /dev/nvme1n1p1 /boot

4. Reinstall the Kernels

Now that the partition is empty and healthy, we put the "brains" back in:
Bash

sudo pacman -S linux-cachyos linux-cachyos-lts

5. Reinstall the Bootloader

Since we wiped the partition, the bootloader files (like GRUB or systemd-boot) are gone. CachyOS usually uses systemd-boot. Run this to put the boot files back:
Bash

sudo bootctl install

If you know you use GRUB instead, let me know, but bootctl is the standard for modern CachyOS/Arch installs.
6. The Final Safety Check

Now, run the command that started all this:
Bash

sudo mkinitcpio -P

Why did this happen?

This type of "garbage character" corruption usually happens if the system writes to the FAT partition and the drive loses power or the kernel crashes mid-write. It creates "ghost" files that block the system from doing anything else.

How did the mkfs.fat command go? If that completes, we are on the home stretch to a safe reboot.
You said

I use zfs

That explains a lot. ZFS is incredibly powerful, but it handles boot partitions differently than standard Arch installs. If your /boot is actually a ZFS legacy mount or part of a ZFSBootMenu setup, a standard mkfs.fat might actually break your ability to find your ZFS pools at startup.

However, the "garbage characters" and Input/output error you saw are coming from the EFI System Partition (ESP), which is almost always a small FAT32 partition, even on ZFS systems.
üö® Crucial Check Before Proceeding

If you are using ZFS, we need to know where your ZFS configuration lives so we don't lock you out.

Run this:
Bash

zfs list

Look at the output: * Do you see a dataset with a mountpoint of / or /boot?

    If /boot is NOT listed in the ZFS list, then /boot is just that corrupted FAT32 partition we discussed, and we can proceed with the format.

    If /boot IS a ZFS dataset, DO NOT run the mkfs.fat command.

If /boot is NOT a ZFS dataset (The most likely scenario):

Your ZFS pool is for your data (/ and /home), but your "bootloader" is on that corrupted NVMe partition.

    Reformat the EFI partition:
    Bash

    sudo umount -l /boot
    sudo mkfs.fat -F 32 /dev/nvme1n1p1
    sudo mount /dev/nvme1n1p1 /boot

    Re-populate the Boot Files:
    Since you are on ZFS, you need the ZFS modules to be baked into the boot image:
    Bash

    sudo pacman -S linux-cachyos linux-cachyos-lts zfs-dkms

    Rebuild the Images:
    Bash

    sudo mkinitcpio -P

If /boot IS a ZFS dataset:

If zfs list shows /boot, your corruption is at the ZFS pool level. In that case, we need to run:
Bash

sudo zpool scrub <your_pool_name>

Wait for it to finish, then check zpool status -v to see which files are unrecoverable.

What did zfs list show? (If you're unsure, paste the output here and I'll tell you exactly which path to take). We want to make sure your ZFS pool is healthy before you even think about GTA V!
You said

rich@BadBitch:~$ zfs list

NAME                          USED  AVAIL  REFER  MOUNTPOINT

zpcachyos                    91.9G   800G    96K  none

zpcachyos/ROOT               91.8G   800G    96K  none

zpcachyos/ROOT/cos           91.8G   800G    96K  none

zpcachyos/ROOT/cos/home      42.0G   800G  38.8G  /home

zpcachyos/ROOT/cos/root      42.2G   800G  27.6G  /

zpcachyos/ROOT/cos/varcache  7.53G   800G  7.51G  /var/cache

zpcachyos/ROOT/cos/varlog    51.6M   800G  13.6M  /var/log

rich@BadBitch:~$

The good news: /boot is NOT on ZFS. Your ZFS list shows that only /, /home, and your log/cache directories are handled by ZFS.

This confirms that /boot is a separate, standard FAT32 partition (the EFI partition) that has simply suffered a major filesystem collapse. This is why you see "garbage" characters and Input/output errors.

Because the EFI partition is currently "junk," your computer cannot update the kernel or the bootloader. If you reboot now, it will likely fail to find the OS. Let's rebuild it while the system is still running.
1. Wipe the Corrupted EFI Partition

We need to format /dev/nvme1n1p1 to give it a clean slate.
Bash

# Unmount the broken partition
sudo umount -l /boot

# Reformat it to FAT32
sudo mkfs.fat -F 32 /dev/nvme1n1p1

# Remount it
sudo mount /dev/nvme1n1p1 /boot

2. Restore the Kernel and ZFS Modules

Now that /boot is empty and healthy, we need to put the kernel files back. Since you are on ZFS, mkinitcpio needs to include the ZFS modules so the system can "unlock" your drive at boot.
Bash

sudo pacman -S linux-cachyos linux-cachyos-lts linux-cachyos-headers zfs-dkms

Note: During this process, watch for the "Updating linux initcpios" hook. It should now run without the "Input/output" error.
3. Reinstall the Bootloader

Since we wiped the partition, the files that tell your BIOS "Hey, CachyOS is here!" are gone. We need to put them back. CachyOS almost always uses systemd-boot.
Bash

sudo bootctl install

4. Final Verification

Run the manual builder one last time. We want to see "Image generation successful" for both kernels.
Bash

sudo mkinitcpio -P

Is it safe to reboot after this?

Yes, as long as mkinitcpio -P finishes without errors.

Once you reboot:

    Your system will be on a fresh, healthy boot partition.

    The xpadneo driver we installed earlier will be active.

    You'll finally be ready to open Edge and launch GTA V.

How did the mkfs.fat and bootctl install commands go? (If bootctl gives you an error about a missing configuration, let me know‚Äîwe might need to copy a loader file back over).
You said

I use rEFInd

Since you are using rEFInd, the process is slightly different. rEFInd is a "meta-bootloader"‚Äîit scans your partitions for kernels and bootloaders. By reformatting the EFI partition, we wiped the rEFInd files and the kernel images it looks for.

We need to format that corrupted partition, put the kernels back, and then tell rEFInd to reinstall itself to the new, clean filesystem.
1. Format and Remount (The Clean Slate)

Let's clear out that "garbage character" corruption once and for all.
Bash

# Unmount the broken partition
sudo umount -l /boot

# Reformat the EFI partition to FAT32
sudo mkfs.fat -F 32 /dev/nvme1n1p1

# Remount it
sudo mount /dev/nvme1n1p1 /boot

2. Reinstall Kernels and ZFS Support

Now we put the "brains" of the OS back into /boot. Because you are on ZFS, the zfs-dkms package is vital‚Äîit ensures the kernel knows how to read your zpcachyos pool.
Bash

sudo pacman -S linux-cachyos linux-cachyos-lts zfs-dkms

Wait for this to finish. You should see mkinitcpio running during the "Hooks" section. If it finishes without an "Input/output error," the physical drive issue is resolved.
3. Reinstall rEFInd

Since we formatted the partition, rEFInd‚Äôs binaries are gone. We need to put them back so your BIOS can find the boot menu.
Bash

sudo refind-install

    Note: If refind-install gives an error about "Not found," you may need to reinstall the package first: sudo pacman -S refind.

4. The ZFS Kernel Parameters (Critical!)

rEFInd needs to know which ZFS dataset to boot from. Usually, rEFInd finds the kernels automatically, but it needs a refind_linux.conf file in /boot.

Check if the file exists:
Bash

ls /boot/refind_linux.conf

If it's missing, you can generate a basic one, but since you are on CachyOS with ZFS, you specifically need the line that points to zpcachyos/ROOT/cos/root.

Run this to generate a new one:
Bash

sudo mkrlconf

Final Check Before Reboot

Run this one last time to ensure the ZFS-aware boot images are ready:
Bash

sudo mkinitcpio -P

Summary of what we just did:

    Wiped the corruption that was causing the Input/output errors.

    Placed fresh kernels on the healthy partition.

    Restored rEFInd so you actually have a menu when you turn the PC on.

How did the refind-install command go? If that worked, you should be safe to reboot, and we can finally get you into GTA V.
You said

I did everything else the rEFInd.


rich@BadBitch:~$ sudo refind-install

ShimSource is none

Installing rEFInd on Linux....

ESP was found at /boot using vfat

Copied rEFInd binary files


Copying sample configuration file as refind.conf; edit this file to configure

rEFInd.


Creating new NVRAM entry

rEFInd is set as the default boot manager.

Creating //boot/refind_linux.conf; edit it to adjust kernel options.


Installation has completed successfully.


rich@BadBitch:~$ ls /boot/refind_linux.conf

/boot/refind_linux.conf

rich@BadBitch:~$

That looks perfect! The "Installation has completed successfully" message means your EFI partition is no longer garbage‚Äîit's a clean, healthy filesystem with the bootloader properly linked to your motherboard's NVRAM.

Since refind-install automatically created a new refind_linux.conf, it should have detected your ZFS root parameters. However, because ZFS requires specific boot flags (like zfs=zpcachyos/ROOT/cos/root), let‚Äôs do one final "sanity check" to ensure you don't get stuck at a command prompt when you reboot.
1. Verify the ZFS Boot Parameters

Open the config file rEFInd just made:
Bash

cat /boot/refind_linux.conf

You want to see a line that mentions zfs=zpcachyos/ROOT/cos/root and rw. If the file looks like it's just generic or empty, rEFInd might not know where your ZFS pool is.
2. The Final "Green Light" Rebuild

Run this one last time. If this finishes without any "Input/output" or "Invalid option" errors, you are officially in the clear:
Bash

sudo mkinitcpio -P

What to expect on Reboot:

    The rEFInd Menu: You should see the rEFInd screen.

    Kernel Choice: Select the standard CachyOS kernel (the one we just reinstalled).

    The Driver: Once you're back at your desktop, the xpadneo driver will be active.

Final Step: GTA V

Once you're back in:

    Turn on your Xbox Controller.

    Open your browser to xbox.com/play.

    GTA V should now recognize your controller perfectly, with full analog trigger support for driving.

Is mkinitcpio -P looking clean now? If so, give that machine a reboot‚Äîyou've earned some Los Santos time after all that terminal troubleshooting!
You said

rich@BadBitch:~$ sudo refind-install

ShimSource is none

Installing rEFInd on Linux....

ESP was found at /boot using vfat

Copied rEFInd binary files


Copying sample configuration file as refind.conf; edit this file to configure

rEFInd.


Creating new NVRAM entry

rEFInd is set as the default boot manager.

Creating //boot/refind_linux.conf; edit it to adjust kernel options.


Installation has completed successfully.


rich@BadBitch:~$ ls /boot/refind_linux.conf

/boot/refind_linux.conf

rich@BadBitch:~$ cat /boot/refind_linux.conf

"Boot with standard options"  "quiet nowatchdog splash nvidia-drm.modeset=1 rw root=ZFS=zpcachyos/ROOT/cos/root resume=UUID=61edab8a-a887-454e-96e7-ef2734009a7b"

"Boot to single-user mode"    "quiet nowatchdog splash nvidia-drm.modeset=1 rw root=ZFS=zpcachyos/ROOT/cos/root resume=UUID=61edab8a-a887-454e-96e7-ef2734009a7b single"

"Boot with minimal options"   "ro root="

rich@BadBitch:~$ sudo mkinitcpio -P

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos-lts.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos-lts -g /boot/initramfs-linux-cachyos-lts.img

==> Using drop-in configuration file: '10-chwd.conf'

==> Starting build: '6.18.13-2-cachyos-lts'

  -> Running build hook: [base]

  -> Running build hook: [udev]

  -> Running build hook: [autodetect]

  -> Running build hook: [microcode]

  -> Running build hook: [kms]

  -> Running build hook: [modconf]

  -> Running build hook: [block]

  -> Running build hook: [keyboard]

  -> Running build hook: [keymap]

  -> Running build hook: [consolefont]

==> WARNING: consolefont: no font found in configuration

  -> Running build hook: [plymouth]

  -> Running build hook: [zfs]

  -> Running build hook: [resume]

  -> Running build hook: [filesystems]

  -> Running build hook: [fsck]

==> Generating module dependencies

==> Creating zstd-compressed initcpio image: '/boot/initramfs-linux-cachyos-lts.img'

  -> Early uncompressed CPIO image generation successful

==> Initcpio image generation successful

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos -g /boot/initramfs-linux-cachyos.img

==> Using drop-in configuration file: '10-chwd.conf'

==> Starting build: '6.19.3-2-cachyos'

  -> Running build hook: [base]

  -> Running build hook: [udev]

  -> Running build hook: [autodetect]
 Gemini
Play GTA 5 on CachyOS via xCloud
https://gemini.google.com/share/a08c4989b110
Created with Fast February 21, 2026 at 03:19 AM Published February 21, 2026 at 07:02 AM
You said

I'm on CachyOS Linux, Can I play GTA 5 via xcloud?

Yes, you absolutely can! Since CachyOS is a high-performance Arch-based Linux distribution, you are in a great position to get a smooth experience.

As of early 2026, GTA V has returned to the Xbox Game Pass library and is officially supported for Xbox Cloud Gaming (xCloud). Since xCloud runs in a browser, it bypasses the typical Linux compatibility hurdles like anti-cheat or Windows-only launchers.
How to Set It Up on CachyOS

Because CachyOS uses the optimized linux-cachyos kernel, you‚Äôll likely experience lower latency than on standard distros. Here is the best way to get it running:
1. Choose Your Browser

For the best performance on Linux, use a Chromium-based browser.

    Microsoft Edge (Flatpak): Often recommended because Microsoft adds specific "Clarity Boost" features for xCloud here.

    Google Chrome / Brave: These work perfectly fine as well.

    Note: Avoid Firefox for xCloud; it often suffers from higher input lag and lower bitrates on Linux.

2. Controller Configuration

CachyOS usually handles controllers (Xbox, DualSense, etc.) out of the box. However, if your browser doesn't "see" your controller, you may need to give it permission:

    If using the Flatpak version of a browser, install Flatseal and ensure the browser has permission to access /run/udev and "All system files."

3. Improving the Experience

Since you are on a rolling release like CachyOS, make sure your system is fully updated to get the latest driver optimizations:
Bash

sudo pacman -Syu

To make it feel like a native app, you can "Install" the page as a PWA (Progressive Web App):

    Navigate to xbox.com/play.

    Click the three dots in your browser menu.

    Select Apps > Install this site as an app.

Pro Tips for xCloud on Linux

    Better xCloud: I highly recommend the Better xCloud script/extension. it allows you to force a 1080p stream, see your ping in real-time, and even use a Mouse & Keyboard on games that usually require a controller.

    Wired is King: Even with CachyOS's network optimizations, a 5GHz Wi-Fi or Ethernet connection is highly recommended to avoid "stuttering" in Los Santos.

Would you like me to help you find the specific terminal commands to install Microsoft Edge or a controller driver for your specific hardware?
You said

I have a newer xbox controller. Sure what are the commands?

To get your newer Xbox controller (Series X|S or One) working perfectly on CachyOS, you'll want to ensure the drivers are optimized and the browser is ready.

Since CachyOS is Arch-based, we have access to xpadneo, which is the gold-standard driver for Xbox controllers on Linux, specifically fixing Bluetooth mapping and rumble issues.
1. Install the Xbox Controller Driver

Open your terminal and run the following to install xpadneo. This driver handles the newer Bluetooth LE (Low Energy) protocols used by Series X|S controllers.
Bash

sudo pacman -S xpadneo-dkms

After installing, it is best to reboot to ensure the new kernel module is loaded.
2. Install Microsoft Edge (for xCloud)

While you can use Chrome, Edge is generally preferred for xCloud due to "Clarity Boost." On CachyOS, the easiest way to get the most stable version is via Flatpak.

If you don't have Flatpak enabled yet:
Bash

sudo pacman -S flatpak

Then install Edge:
Bash

flatpak install flathub com.microsoft.Edge

3. Fix Controller Permissions (Important!)

Browsers installed via Flatpak often have "sandboxed" permissions that prevent them from seeing your controller. You can fix this with a single command:
Bash

flatpak override com.microsoft.Edge --device=all

4. Connect via Bluetooth

If you are using Bluetooth, newer Xbox controllers sometimes struggle to stay connected due to "Early Renew" features in Linux. If your controller keeps disconnecting, run this command to disable that specific Bluetooth power-saving feature:
Bash

sudo sh -c 'echo "options bluetooth disable_ertm=1" > /etc/modprobe.d/bluetooth.conf'

Summary Checklist:

    Pair the controller via your Bluetooth settings.

    Open Edge and go to xbox.com/play.

    Check for the controller icon in the top right of the xCloud dashboard.

A quick tip: If your controller is still acting weird, you might need to update its firmware. Unfortunately, that requires the "Xbox Accessories" app on a Windows PC or an actual Xbox console.

Would you like the commands to install the Better xCloud script to unlock 1080p streaming?
You said

‚ùØ sudo pacman -S xpadneo-dkms

[sudo] password for rich:

resolving dependencies...

looking for conflicting packages...


Package (1)           New Version  Net Change  Download Size


cachyos/xpadneo-dkms  0.9.8-1        0.05 MiB       0.02 MiB


Total Download Size:   0.02 MiB

Total Installed Size:  0.05 MiB


:: Proceed with installation? [Y/n] y

:: Retrieving packages...

 xpadneo-dkms-0.9.8-1-any   18.1 KiB   130 KiB/s 00:00 [----------------------------] 100%

(1/1) checking keys in keyring                         [----------------------------] 100%

(1/1) checking package integrity                       [----------------------------] 100%

(1/1) loading package files                            [----------------------------] 100%

(1/1) checking for file conflicts                      [----------------------------] 100%

:: Processing package changes...

(1/1) installing xpadneo-dkms                          [----------------------------] 100%

:: Running post-transaction hooks...

(1/4) Reloading device manager configuration...

(2/4) Arming ConditionNeedsUpdate...

(3/4) Install DKMS modules

==> dkms install --no-depmod hid-xpadneo/v0.9.8 -k 6.18.13-2-cachyos-lts

==> dkms install --no-depmod hid-xpadneo/v0.9.8 -k 6.19.3-2-cachyos

==> depmod 6.19.3-2-cachyos

==> depmod 6.18.13-2-cachyos-lts

(4/4) Updating linux initcpios...

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos-lts.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos-lts -g /boot/initramfs-linux-cachyos-lts.img

==> ERROR: Invalid option -k -- '/boot/vmlinuz-linux-cachyos-lts' must be readable

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos -g /boot/initramfs-linux-cachyos.img

==> ERROR: Invalid option -g -- '/boot/initramfs-linux-cachyos.img' must be writable

error: command failed to execute correctly


~

It looks like the installation hit a snag because the mkinitcpio hook (which updates your boot images) ran into a permissions or path error. This is fairly common on Arch-based systems when a kernel update happened recently but the system hasn't been rebooted, or if the hook is trying to write to /boot without the right environment.

The good news is that xpadneo usually works fine even if the initcpio part fails, as it's a dynamic module. However, we should clean this up to ensure your controller (and your system) boots correctly.
1. Fix the Permissions/Update

The error must be readable/writable usually means the script is having trouble accessing your boot partition. Try running a manual update of your boot images with sudo:
Bash

sudo mkinitcpio -P

If that still gives an error, try syncing your file system and reinstalling the headers to make sure everything matches:
Bash

sudo pacman -S linux-cachyos-headers linux-cachyos-lts-headers

2. Check if xpadneo Loaded

You might not even need to fix the mkinitcpio error for the controller to work right now. Try to manually load the module:
Bash

sudo modprobe hid-xpadneo

    If it returns no error: You're good to go!

    If it says "Module not found": A reboot is required because your running kernel version and the installed module version are out of sync.

3. Pairing the Controller

Since you have a newer Xbox controller, pairing via Bluetooth on Linux sometimes requires a specific sequence.

    Open your Bluetooth settings in CachyOS (KDE or GNOME).

    Hold the Pair button on the top of the controller until the Xbox logo flashes rapidly.

    Select "Xbox Wireless Controller" on your screen.

4. Better xCloud (The "Secret Sauce")

Since you're ready to play GTA V, you definitely want this. It fixes the blurry stream quality and adds controller features.

To install it:

    Install the Tampermonkey extension in your browser (Edge or Chrome).

    Go to the Better xCloud GitHub and click Install.

    Open xbox.com/play ‚Äî you'll see a new "Better xCloud" menu icon in the top left.

        Pro Tip: Set the "High Quality" preset and enable the "Controller Overlay" to test your buttons.

Would you like me to show you how to check if your controller's "deadzones" are correct once you're connected? (GTA V can be a bit sensitive to stick drift on cloud streams).
You said

‚ùØ sudo mkinitcpio -P

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos-lts.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos-lts -g /boot/initramfs-linux-cachyos-lts.img

==> ERROR: Invalid option -k -- '/boot/vmlinuz-linux-cachyos-lts' must be readable

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos -g /boot/initramfs-linux-cachyos.img

==> ERROR: Invalid option -g -- '/boot/initramfs-linux-cachyos.img' must be writable


~

This error is a bit of a "hiccup" in how CachyOS's presets are interacting with your current environment. The Invalid option -k error usually happens when mkinitcpio is fed a path that doesn't exist or is inaccessible (likely because your boot partition isn't mounted or the kernel files were moved during an update).

Since we just want to play GTA V, we can bypass this headache for now. xpadneo (your controller driver) is a DKMS module, meaning it builds itself for your kernel without needing to be baked into the initramfs boot image immediately.
Step 1: Check if the driver is actually working

Run this to see if the driver is loaded despite the error:
Bash

lsmod | grep xpadneo

    If you see output: The driver is active! You can skip the errors and start gaming.

    If nothing shows up: Try to force load it: sudo modprobe hid-xpadneo.

Step 2: The "CachyOS Way" to fix the Boot Error

If you want to clear those errors, the issue is likely that your /boot partition isn't mounted properly (common if you use systemd-boot or specialized partitions). Try this:

    Check your mount: ```bash
    ls /boot

    If you don't see files like `vmlinuz-linux-cachyos`, your boot partition isn't mounted. Run `sudo mount -a` and try `sudo mkinitcpio -P` again.

    Use CachyOS's built-in tool: CachyOS has a GUI and CLI tool that handles kernel maintenance better than raw commands sometimes. Open your terminal and run:
    Bash

    cachyos-hello

    Go to Navigate to "System Update" or "Rank Mirrors" and let it run a sync. This often triggers a clean rebuild of the kernel images that bypasses manual script errors.

Step 3: Verify the Controller for GTA V

Once you pair the controller via Bluetooth, you should verify it‚Äôs being mapped correctly before you launch xCloud.

    Open your browser and go to gamepad-tester.com.

    Press any button on your Xbox controller.

    Crucial for GTA V: Ensure the RT and LT (triggers) show a range from 0.00 to 1.00. If they act like simple on/off buttons, GTA V driving will be nearly impossible. xpadneo usually fixes this automatically.

Step 4: Launching the Game

    Open Edge (or your browser).

    Go to xbox.com/play.

    Sign in, find Grand Theft Auto V, and hit Play.

One last tip for GTA V on xCloud: Since it's a stream, the game might feel a bit "heavy." In the GTA V in-game settings, go to Settings > Controls and turn the Look Sensitivity up and the Deadzone down to 0. This helps mask the slight network latency.

Would you like me to help you set up a desktop shortcut so you can launch GTA V directly from your CachyOS app menu?
You said

‚ùØ sudo mount -a

‚ùØ sudo mkinitcpio -P

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos-lts.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos-lts -g /boot/initramfs-linux-cachyos-lts.img

==> ERROR: Invalid option -k -- '/boot/vmlinuz-linux-cachyos-lts' must be readable

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos -g /boot/initramfs-linux-cachyos.img

==> ERROR: Invalid option -g -- '/boot/initramfs-linux-cachyos.img' must be writable


~

‚ùØ

It looks like your CachyOS configuration files (the .preset files) are formatted incorrectly or are corrupted. The error Invalid option -k followed by the file path suggests the script is misinterpreting the command structure, likely due to a syntax error inside the files in /etc/mkinitcpio.d/.

However, you don't actually need to fix this to play GTA V. Since you successfully ran sudo pacman -S xpadneo-dkms, the driver was built. As long as you aren't trying to boot a brand-new kernel right this second, your controller should work.
Step 1: Force Load the Driver

Let's skip the boot-image headache and just turn the driver on:
Bash

sudo modprobe hid-xpadneo

Then, check if it's active:
Bash

lsmod | grep xpadneo

If you see hid_xpadneo in the list, you are ready to play.
Step 2: Connect and Test

    Pair your controller via your Bluetooth settings.

    Go to Gamepad Tester in your browser.

    Move the sticks. If the "Axis" bars move, your Linux OS is successfully communicating with the controller.

Step 3: Launch GTA V on xCloud

    Open your browser (Edge or Chrome).

    Go to xbox.com/play.

    Sign in and launch GTA V.

    Note: Since it's a cloud game, the "Xbox" button on your controller might open your Linux "Start" menu instead of the in-game menu. To fix this, use the Full Screen mode in the browser (usually F11).

If you want to fix that mkinitcpio error later:

The preset files in /etc/mkinitcpio.d/ likely have an extra space or a missing quote. You can usually fix them by reinstalling the kernel packages, which regenerates those presets:
Bash

sudo pacman -S linux-cachyos linux-cachyos-headers

Would you like me to give you the specific settings for "Better xCloud" to make GTA V look less blurry on your screen?
You said

No I dont want there to be a problem when I boot

I hear you‚ÄîI'd be nervous too. In Linux, if mkinitcpio (the tool that builds your boot files) fails, it can sometimes mean your system won't have the necessary "map" to find your hardware the next time you turn it on.

The error you're seeing (Invalid option -k) usually points to a syntax error in your preset files. This sometimes happens on CachyOS if a config file gets corrupted or if a weird character (like a stray quote) was added during an update.

Here is how to fix it safely so you can boot without worry.
1. Identify the Broken File

The error is coming from files in /etc/mkinitcpio.d/. Let‚Äôs look at them:
Bash

ls /etc/mkinitcpio.d/

You should see linux-cachyos.preset and linux-cachyos-lts.preset.
2. The "Nuclear" (But Safe) Fix

The most reliable way to fix corrupted presets on CachyOS is to delete them and let the system regenerate them correctly by reinstalling the kernels. Do not reboot until you finish these steps.

Run these one by one:

    Remove the potentially broken presets:
    Bash

    sudo rm /etc/mkinitcpio.d/linux-cachyos.preset
    sudo rm /etc/mkinitcpio.d/linux-cachyos-lts.preset

    Reinstall the kernels (This forces CachyOS to recreate clean presets):
    Bash

    sudo pacman -S linux-cachyos linux-cachyos-headers linux-cachyos-lts linux-cachyos-lts-headers

    Watch the terminal output. This time, it should say "Building image from preset" and show progress bars (0%... 100%) without the "-k" or "-g" errors.

3. Verify the Fix

Once the command above finishes, run the manual builder one last time to be 100% sure:
Bash

sudo mkinitcpio -P

If it finishes with no errors (no red text), your system is officially safe to boot.
Why this happened?

It‚Äôs a known quirk where CachyOS‚Äôs automated scripts sometimes misconfigure the "preset" file if the boot partition wasn't perfectly mounted during a previous update. By deleting those small config files and reinstalling the kernel, you‚Äôre essentially "resetting" the boot instructions to factory defaults.

Once you get a clean mkinitcpio -P run, you can relax and get back to GTA V!

Would you like me to wait here while you run those commands to make sure everything clears up?
You said

:: Running post-transaction hooks...

(1/6) Arming ConditionNeedsUpdate...

(2/6) Updating module dependencies...

(3/6) Install DKMS modules

==> dkms install --no-depmod zfs/2.4.0 -k 6.18.13-2-cachyos-lts


==> dkms install --no-depmod hid-xpadneo/v0.9.8 -k 6.18.13-2-cachyos-lts

==> dkms install --no-depmod hid-xpadneo/v0.9.8 -k 6.19.3-2-cachyos

==> dkms install --no-depmod zfs/2.4.0 -k 6.19.3-2-cachyos

==> WARNING: `dkms install --no-depmod zfs/2.4.0 -k 6.19.3-2-cachyos' exited 1

==> depmod 6.19.3-2-cachyos

==> depmod 6.18.13-2-cachyos-lts

(4/6) Updating linux initcpios...

install: cannot create regular file '/boot/vmlinuz-linux-cachyos-lts': Read-only file system

error: command failed to execute correctly

(5/6) Check if user should be informed about rebooting after certain system package upgrades.

==> INFO: Reboot is recommended due to the upgrade of core system package(s).

(6/6) Checking which packages need to be rebuilt


~

Okay, we‚Äôve found the root cause: Your boot partition (/boot) has flipped into "Read-only" mode. This usually happens as a safety measure by the Linux kernel if it detects a file system error or if the drive wasn't unmounted properly. This is why mkinitcpio couldn't write the files and gave you those weird "must be writable" errors.

Do not reboot yet. We need to make /boot writable again so the kernel images can be saved correctly.
Step 1: Force Remount as Read-Write

Run this command to tell the system to ignore the "read-only" flag and try to open it up for writing:
Bash

sudo mount -o remount,rw /boot

Step 2: Check if it worked

Try to create a tiny temporary file to see if the "Read-only" error is gone:
Bash

sudo touch /boot/testfile && sudo rm /boot/testfile

    If no error: Great! Move to Step 3.

    If it still says "Read-only": Your file system might have an error that needs fixing. Run:
    Bash

    sudo fsck -y /boot

    (Then try the remount command from Step 1 again).

Step 3: Finish the Kernel Install

Now that the drive is (hopefully) writable, let's finish the job that failed earlier:
Bash

sudo mkinitcpio -P

If this command finishes without "Read-only" or "Invalid option" errors, your system is safe to reboot. ---
A Note on the ZFS Warning

You saw a warning about zfs/2.4.0 exiting with 1. Unless you are specifically using a ZFS file system for your main drives, you can safely ignore this for now. The important part is getting vmlinuz (the kernel) and initramfs (the boot instructions) written to /boot.
Why did this happen?

Sometimes, if a system update is interrupted or if there's a slight hiccup with the NVMe/SSD communication, Linux "locks" the boot partition to prevent data corruption.

Once mkinitcpio -P finishes successfully, you‚Äôll be all set to reboot and finally jump into GTA V! How did the mount -o remount,rw /boot command go? Any errors there?
You said

‚ùØ sudo mount -o remount,rw /boot

‚ùØ sudo touch /boot/testfile && sudo rm /boot/testfile

touch: cannot touch '/boot/testfile': Input/output error

‚ùØ sudo fsck -y /boot

fsck from util-linux 2.41.3

fsck.fat 4.2 (2021-01-31)

There are differences between boot sector and its backup.

This is mostly harmless. Differences: (offset:original/backup)

  65:01/00

  Not automatically fixing this.

Both FATs appear to be corrupt. Giving up. Run fsck.fat with non-zero -F option.


~

‚ùØ

This is a bit more serious than a simple configuration error, but it is fixable. The Input/output error and the Corrupt FATs message mean your EFI/Boot partition (where the kernel lives) has file system corruption. Linux locked it to "Read-Only" to prevent further damage.

Because your mkinitcpio failed to write the kernel files, do not reboot yet, or the system might not find the kernel to start up. We need to repair that partition now.
Step 1: Repair the Boot Partition

Since it's a FAT32 partition (standard for EFI), we need to use the -w (write) and -r (interactive/repair) flags to force a fix.

Run this command:
Bash

sudo fsck.fat -a -w -v /dev/sda1

    Note: I used /dev/sda1 as a guess. To be 100% sure which partition is your boot drive, run lsblk first. Look for the one mounted at /boot. Replace /dev/sda1 with whatever yours is (e.g., /dev/nvme0n1p1).

    The -a will automatically repair, and -w will write the changes immediately.

Step 2: Remount and Test again

Once the repair finishes, try to make it writable again:
Bash

sudo mount -o remount,rw /boot
sudo touch /boot/testfile && sudo rm /boot/testfile

If touch works now without an "Input/output error," the "physical" hurdle is cleared.
Step 3: Re-generate the Boot Images (The "Safety" Step)

Now that the drive is healthy, we must ensure the boot files are actually there. Run:
Bash

sudo mkinitcpio -P

Watch for the output. You want to see "Image generation successful" for both the LTS and standard CachyOS kernels.
What if Step 1 fails?

If fsck.fat says it still cannot fix it, the partition might be physically failing or severely scrambled. In that case:

    Back up any files you can from /boot to a folder in your Home directory.

    We may need to format that specific partition and reinstall the grub or systemd-boot loader, but let's try the fsck repair first.

How did the fsck.fat command respond? Did it report that it fixed the "differences between boot sector and backup"?
You said

‚ùØ sudo fsck.fat -a -w -v /dev/sda1

fsck.fat 4.2 (2021-01-31)

open: No such file or directory


~

‚ùØ

Ah, that's my fault‚ÄîI used a placeholder drive name. On modern systems (especially NVMe drives), the name is usually something like /dev/nvme0n1p1.

Let's find the exact name of your boot partition so we can fix it.
1. Find your Boot Partition Name

Run this command:
Bash

lsblk -o NAME,FSTYPE,SIZE,MOUNTPOINTS

Look for the partition that is mounted at /boot. It will likely be around 512MB to 1GB and have the type vfat.
2. Run the Repair on the Correct Partition

Once you have the name (let's say it's /dev/nvme0n1p1), run the repair command using that specific path:
Bash

sudo fsck.fat -a -w -v /dev/YOUR_PARTITION_NAME

(Replace YOUR_PARTITION_NAME with what you found in step 1, e.g., nvme0n1p1).
3. Finalizing the Safety Check

If that command finishes successfully, we just need to do the "Handshake" to make sure the system is bootable:

    Remount: sudo mount -o remount,rw /boot

    Rebuild: sudo mkinitcpio -P

A quick "Why" on the Error:

The reason you got "No such file or directory" is simply because /dev/sda1 is the name for older SATA hard drives. Most modern CachyOS installs are on NVMe sticks, which use the nvme naming convention.

Tell me what name you found with lsblk, or if the repair command worked! We want to get this green-lit so you can finally stop troubleshooting and start playing GTA.
You said

I usse nvme1n1

Got it. Since your drive is nvme1n1, your boot partition is likely nvme1n1p1 (the first partition on that drive).

Let's fix that file system right now so you can safely reboot.
1. Run the Repair

Run this command to target the specific partition on your NVMe drive:
Bash

sudo fsck.fat -a -w -v /dev/nvme1n1p1

    Note: If it tells you the partition is currently mounted, you can try adding the -l flag to the mount command first (sudo umount -l /boot), but usually, fsck.fat will handle the repair if you've already seen those "Input/output" errors.

2. Make it Writable and Rebuild

Once the repair is done, we need to ensure the boot files are actually written to the disk. If you skip this, the computer might not have a "brain" to boot into next time.

    Remount as Read-Write:
    Bash

    sudo mount -o remount,rw /boot

    Run the Boot Image Creator:
    Bash

    sudo mkinitcpio -P

3. The "All Clear" Signal

If mkinitcpio -P finishes without saying "Error," "Read-only," or "Invalid option," you are 100% safe.
Why did this happen on CachyOS?

NVMe drives are incredibly fast, but if the system power-cycles or hangs while the boot partition is being updated (which happens during kernel updates), the FAT32 file system used for booting can get "dirty." Linux is just being over-protective by locking it.

How did the fsck.fat on nvme1n1p1 go? Once that's clear, you can finally reboot, and your Xbox controller (via the xpadneo driver we installed earlier) will be ready for GTA V.
You said

‚ùØ sudo fsck.fat -a -w -v /dev/nvme1n1p1

fsck.fat 4.2 (2021-01-31)

Checking we can access the last sector of the filesystem

Boot sector contents:

System ID "mkfs.fat"

Media byte 0xf8 (hard disk)

       512 bytes per logical sector

      4096 bytes per cluster

        32 reserved sectors

First FAT starts at byte 16384 (sector 32)

         2 FATs, 32 bit entries

   2093056 bytes per FAT (= 4088 sectors)

Root directory start at cluster 2 (arbitrary size)

Data area starts at byte 4202496 (sector 8208)

    523262 data clusters (2143281152 bytes)

32 sectors/track, 64 heads

      2048 hidden sectors

   4194304 sectors total

Reclaiming unconnected clusters.

Checking free cluster summary.

/dev/nvme1n1p1: 114 files, 4146/523262 clusters

‚ùØ sudo mount -o remount,rw /boot

‚ùØ sudo mkinitcpio -P

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos-lts.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos-lts -g /boot/initramfs-linux-cachyos-lts.img

==> ERROR: Invalid option -k -- '/boot/vmlinuz-linux-cachyos-lts' must be readable


~

That fsck run was successful and fixed the file system errors, but it confirms a theory: your preset files in /etc/mkinitcpio.d/ are definitely malformed. The script is misreading the configuration line and treating the file path as an "invalid option" rather than a parameter.

Since the drive is now healthy and writable, we can fix the logic.
1. The Clean Reset

We need to get rid of those broken configuration files and let the system generate fresh ones. Run these commands:
Bash

# Delete the broken presets
sudo rm /etc/mkinitcpio.d/linux-cachyos.preset
sudo rm /etc/mkinitcpio.d/linux-cachyos-lts.preset

# Reinstall the kernel packages to generate brand new presets
sudo pacman -S linux-cachyos linux-cachyos-lts

2. Verify the Build

Now that the files have been recreated from scratch by the system, try the build again:
Bash

sudo mkinitcpio -P

What to look for:
If it works, you will see a line like ==> Generating module dependencies and ==> Image generation successful. You will not see the -k error.
Why this is happening (The Technical Bit)

In Arch/CachyOS, a .preset file tells mkinitcpio where to find the kernel (-k) and where to save the image (-g). If those files accidentally got saved with "rich text" characters, weird line endings, or if a script messed up the syntax, mkinitcpio sees:
preset_kver='/boot/vmlinuz...'
as
command -k /boot/vmlinuz...
and chokes on it. Deleting them and reinstalling the kernel package is the safest way to "factory reset" those specific boot instructions.

Once mkinitcpio -P finishes successfully, you are 100% safe to reboot. How did the pacman -S command go? Any errors during the "reinstall" phase?
You said

‚ùØ # Delete the broken presets

  sudo rm /etc/mkinitcpio.d/linux-cachyos.preset

  sudo rm /etc/mkinitcpio.d/linux-cachyos-lts.preset


  # Reinstall the kernel packages to generate brand new presets

  sudo pacman -S linux-cachyos linux-cachyos-lts

rm: cannot remove '/etc/mkinitcpio.d/linux-cachyos.preset': No such file or directory

warning: linux-cachyos-6.19.3-2 is up to date -- reinstalling

warning: linux-cachyos-lts-6.18.13-2 is up to date -- reinstalling

resolving dependencies...

looking for conflicting packages...


Package (2)                   Old Version  New Version  Net Change


cachyos-v3/linux-cachyos      6.19.3-2     6.19.3-2       0.00 MiB

cachyos-v3/linux-cachyos-lts  6.18.13-2    6.18.13-2      0.00 MiB


Total Installed Size:  295.55 MiB

Net Upgrade Size:        0.00 MiB


:: Proceed with installation? [Y/n] y

(2/2) checking keys in keyring                         [----------------------------] 100%

(2/2) checking package integrity                       [----------------------------] 100%

(2/2) loading package files                            [----------------------------] 100%

(2/2) checking for file conflicts                      [----------------------------] 100%

:: Processing package changes...

(1/2) reinstalling linux-cachyos                       [----------------------------] 100%

(2/2) reinstalling linux-cachyos-lts                   [----------------------------] 100%

:: Running post-transaction hooks...

(1/5) Arming ConditionNeedsUpdate...

(2/5) Updating module dependencies...

(3/5) Updating linux initcpios...

install: cannot create regular file '/boot/vmlinuz-linux-cachyos-lts': Input/output error

error: command failed to execute correctly

(4/5) Check if user should be informed about rebooting after certain system package upgrades.

==> INFO: Reboot is recommended due to the upgrade of core system package(s).

(5/5) Checking which packages need to be rebuilt

‚ùØ sudo mkinitcpio -P

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos-lts.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos-lts -g /boot/initramfs-linux-cachyos-lts.img

==> ERROR: Invalid option -k -- '/boot/vmlinuz-linux-cachyos-lts' must be readable


~

This is stubborn, but we‚Äôre narrowing it down. The Input/output error returning even after an fsck repair is a giant red flag. It means that while the file system structure was fixed, the actual kernel file (vmlinuz-linux-cachyos-lts) is sitting on a "bad block" or a corrupted sector that the system cannot read or overwrite.

Because the file is unreadable, mkinitcpio sees the path, tries to access it, fails, and then throws that weird "Invalid option" error because it essentially received a "null" or "garbage" response from the drive.

We need to force the drive to let go of that specific corrupted file.
1. The "Force Delete" and Reinstall

Since we can't overwrite it, we have to try to delete the corrupted kernel files manually so pacman can place fresh, healthy ones in their spot.

Run this:
Bash

sudo rm -f /boot/vmlinuz-linux-cachyos*
sudo rm -f /boot/initramfs-linux-cachyos*

2. Check if they are actually gone

Run:
Bash

ls /boot

If you still see vmlinuz-linux-cachyos-lts in the list, the rm failed. This confirms the file system is still locked or the hardware is having a moment.
3. If they are gone, Reinstall Kernels

Now, try the reinstall one more time. This will download fresh copies and try to write them to new sectors on your NVMe:
Bash

sudo pacman -S linux-cachyos linux-cachyos-lts

4. The Final Rebuild

If that finishes without an Input/output error, run the final check:
Bash

sudo mkinitcpio -P

What if it still says "Input/output error"?

If you cannot delete those files or pacman still fails to write to /boot, your EFI partition is likely stuck in a hardware-level error state.

Wait! Don't reboot yet if Step 3 fails. If Step 3 fails, your /boot folder is empty (no kernel), and the computer won't start.

Tell me: Did the sudo rm command in Step 1 give you an error, or did it let you delete those files?
You said

‚ùØ sudo rm -f /boot/vmlinuz-linux-cachyos*

  sudo rm -f /boot/initramfs-linux-cachyos*

fish: No matches for wildcard '/boot/vmlinuz-linux-cachyos*'. See `help language#wildcards-globbing`.

sudo rm -f /boot/vmlinuz-linux-cachyos*

           ^~~~~~~~~~~~~~~~~~~~~~~~~~~^

fish: No matches for wildcard '/boot/initramfs-linux-cachyos*'. See `help language#wildcards-globbing`.

sudo rm -f /boot/initramfs-linux-cachyos*

           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~^

‚ùØ bah

fish: Unknown command: bah

‚ùØ bash

rich@BadBitch:~$ sudo rm -f /boot/vmlinuz-linux-cachyos*

sudo rm -f /boot/initramfs-linux-cachyos*

rich@BadBitch:~$ ls /boot

ls: cannot open directory '/boot': Permission denied

rich@BadBitch:~$ sudo ls /boot

ls: reading directory '/boot': Input/output error

'‚ïôc'$'\016''‚ïù√•'$'\035''‚î§‚ñê.'$'\020''Œ©'  'pu¬•0J_√†œÜ.√©'$'\033''$'  '#'$'\037''r‚ï®m√≥‚â§‚ï™.2@‚î¥'

rich@BadBitch:~$

This is a "stop everything" moment. Look at those filenames in your /boot directory: ‚ïôc'$'\016''‚ïù√•.... That isn't just a configuration error‚Äîthat is severe filesystem corruption (often called "Mojibake" or "garbage text").

When ls shows symbols like that and returns an Input/output error, it means the File Allocation Table (FAT) on your boot partition is scrambled. The reason mkinitcpio is failing is that it literally cannot find a valid place to put the files.

Do not turn off your computer yet. If you reboot now, your BIOS won't be able to read that garbage and the system won't start.
The Plan: Reformat the Boot Partition

Since the filesystem is corrupted beyond a simple fsck repair, we need to wipe the /boot partition and recreate it. Because /boot only contains the kernel and bootloader (not your personal files), this is safe for your data, but critical for booting.
1. Unmount the broken partition
Bash

sudo umount -l /boot

2. Reformat the partition to FAT32

We are going to give it a fresh start. Triple-check that nvme1n1p1 is indeed your EFI partition (based on our previous steps, it is).
Bash

sudo mkfs.fat -F 32 /dev/nvme1n1p1

3. Remount the fresh partition
Bash

sudo mount /dev/nvme1n1p1 /boot

4. Reinstall the Kernels

Now that the partition is empty and healthy, we put the "brains" back in:
Bash

sudo pacman -S linux-cachyos linux-cachyos-lts

5. Reinstall the Bootloader

Since we wiped the partition, the bootloader files (like GRUB or systemd-boot) are gone. CachyOS usually uses systemd-boot. Run this to put the boot files back:
Bash

sudo bootctl install

If you know you use GRUB instead, let me know, but bootctl is the standard for modern CachyOS/Arch installs.
6. The Final Safety Check

Now, run the command that started all this:
Bash

sudo mkinitcpio -P

Why did this happen?

This type of "garbage character" corruption usually happens if the system writes to the FAT partition and the drive loses power or the kernel crashes mid-write. It creates "ghost" files that block the system from doing anything else.

How did the mkfs.fat command go? If that completes, we are on the home stretch to a safe reboot.
You said

I use zfs

That explains a lot. ZFS is incredibly powerful, but it handles boot partitions differently than standard Arch installs. If your /boot is actually a ZFS legacy mount or part of a ZFSBootMenu setup, a standard mkfs.fat might actually break your ability to find your ZFS pools at startup.

However, the "garbage characters" and Input/output error you saw are coming from the EFI System Partition (ESP), which is almost always a small FAT32 partition, even on ZFS systems.
üö® Crucial Check Before Proceeding

If you are using ZFS, we need to know where your ZFS configuration lives so we don't lock you out.

Run this:
Bash

zfs list

Look at the output: * Do you see a dataset with a mountpoint of / or /boot?

    If /boot is NOT listed in the ZFS list, then /boot is just that corrupted FAT32 partition we discussed, and we can proceed with the format.

    If /boot IS a ZFS dataset, DO NOT run the mkfs.fat command.

If /boot is NOT a ZFS dataset (The most likely scenario):

Your ZFS pool is for your data (/ and /home), but your "bootloader" is on that corrupted NVMe partition.

    Reformat the EFI partition:
    Bash

    sudo umount -l /boot
    sudo mkfs.fat -F 32 /dev/nvme1n1p1
    sudo mount /dev/nvme1n1p1 /boot

    Re-populate the Boot Files:
    Since you are on ZFS, you need the ZFS modules to be baked into the boot image:
    Bash

    sudo pacman -S linux-cachyos linux-cachyos-lts zfs-dkms

    Rebuild the Images:
    Bash

    sudo mkinitcpio -P

If /boot IS a ZFS dataset:

If zfs list shows /boot, your corruption is at the ZFS pool level. In that case, we need to run:
Bash

sudo zpool scrub <your_pool_name>

Wait for it to finish, then check zpool status -v to see which files are unrecoverable.

What did zfs list show? (If you're unsure, paste the output here and I'll tell you exactly which path to take). We want to make sure your ZFS pool is healthy before you even think about GTA V!
You said

rich@BadBitch:~$ zfs list

NAME                          USED  AVAIL  REFER  MOUNTPOINT

zpcachyos                    91.9G   800G    96K  none

zpcachyos/ROOT               91.8G   800G    96K  none

zpcachyos/ROOT/cos           91.8G   800G    96K  none

zpcachyos/ROOT/cos/home      42.0G   800G  38.8G  /home

zpcachyos/ROOT/cos/root      42.2G   800G  27.6G  /

zpcachyos/ROOT/cos/varcache  7.53G   800G  7.51G  /var/cache

zpcachyos/ROOT/cos/varlog    51.6M   800G  13.6M  /var/log

rich@BadBitch:~$

The good news: /boot is NOT on ZFS. Your ZFS list shows that only /, /home, and your log/cache directories are handled by ZFS.

This confirms that /boot is a separate, standard FAT32 partition (the EFI partition) that has simply suffered a major filesystem collapse. This is why you see "garbage" characters and Input/output errors.

Because the EFI partition is currently "junk," your computer cannot update the kernel or the bootloader. If you reboot now, it will likely fail to find the OS. Let's rebuild it while the system is still running.
1. Wipe the Corrupted EFI Partition

We need to format /dev/nvme1n1p1 to give it a clean slate.
Bash

# Unmount the broken partition
sudo umount -l /boot

# Reformat it to FAT32
sudo mkfs.fat -F 32 /dev/nvme1n1p1

# Remount it
sudo mount /dev/nvme1n1p1 /boot

2. Restore the Kernel and ZFS Modules

Now that /boot is empty and healthy, we need to put the kernel files back. Since you are on ZFS, mkinitcpio needs to include the ZFS modules so the system can "unlock" your drive at boot.
Bash

sudo pacman -S linux-cachyos linux-cachyos-lts linux-cachyos-headers zfs-dkms

Note: During this process, watch for the "Updating linux initcpios" hook. It should now run without the "Input/output" error.
3. Reinstall the Bootloader

Since we wiped the partition, the files that tell your BIOS "Hey, CachyOS is here!" are gone. We need to put them back. CachyOS almost always uses systemd-boot.
Bash

sudo bootctl install

4. Final Verification

Run the manual builder one last time. We want to see "Image generation successful" for both kernels.
Bash

sudo mkinitcpio -P

Is it safe to reboot after this?

Yes, as long as mkinitcpio -P finishes without errors.

Once you reboot:

    Your system will be on a fresh, healthy boot partition.

    The xpadneo driver we installed earlier will be active.

    You'll finally be ready to open Edge and launch GTA V.

How did the mkfs.fat and bootctl install commands go? (If bootctl gives you an error about a missing configuration, let me know‚Äîwe might need to copy a loader file back over).
You said

I use rEFInd

Since you are using rEFInd, the process is slightly different. rEFInd is a "meta-bootloader"‚Äîit scans your partitions for kernels and bootloaders. By reformatting the EFI partition, we wiped the rEFInd files and the kernel images it looks for.

We need to format that corrupted partition, put the kernels back, and then tell rEFInd to reinstall itself to the new, clean filesystem.
1. Format and Remount (The Clean Slate)

Let's clear out that "garbage character" corruption once and for all.
Bash

# Unmount the broken partition
sudo umount -l /boot

# Reformat the EFI partition to FAT32
sudo mkfs.fat -F 32 /dev/nvme1n1p1

# Remount it
sudo mount /dev/nvme1n1p1 /boot

2. Reinstall Kernels and ZFS Support

Now we put the "brains" of the OS back into /boot. Because you are on ZFS, the zfs-dkms package is vital‚Äîit ensures the kernel knows how to read your zpcachyos pool.
Bash

sudo pacman -S linux-cachyos linux-cachyos-lts zfs-dkms

Wait for this to finish. You should see mkinitcpio running during the "Hooks" section. If it finishes without an "Input/output error," the physical drive issue is resolved.
3. Reinstall rEFInd

Since we formatted the partition, rEFInd‚Äôs binaries are gone. We need to put them back so your BIOS can find the boot menu.
Bash

sudo refind-install

    Note: If refind-install gives an error about "Not found," you may need to reinstall the package first: sudo pacman -S refind.

4. The ZFS Kernel Parameters (Critical!)

rEFInd needs to know which ZFS dataset to boot from. Usually, rEFInd finds the kernels automatically, but it needs a refind_linux.conf file in /boot.

Check if the file exists:
Bash

ls /boot/refind_linux.conf

If it's missing, you can generate a basic one, but since you are on CachyOS with ZFS, you specifically need the line that points to zpcachyos/ROOT/cos/root.

Run this to generate a new one:
Bash

sudo mkrlconf

Final Check Before Reboot

Run this one last time to ensure the ZFS-aware boot images are ready:
Bash

sudo mkinitcpio -P

Summary of what we just did:

    Wiped the corruption that was causing the Input/output errors.

    Placed fresh kernels on the healthy partition.

    Restored rEFInd so you actually have a menu when you turn the PC on.

How did the refind-install command go? If that worked, you should be safe to reboot, and we can finally get you into GTA V.
You said

I did everything else the rEFInd.


rich@BadBitch:~$ sudo refind-install

ShimSource is none

Installing rEFInd on Linux....

ESP was found at /boot using vfat

Copied rEFInd binary files


Copying sample configuration file as refind.conf; edit this file to configure

rEFInd.


Creating new NVRAM entry

rEFInd is set as the default boot manager.

Creating //boot/refind_linux.conf; edit it to adjust kernel options.


Installation has completed successfully.


rich@BadBitch:~$ ls /boot/refind_linux.conf

/boot/refind_linux.conf

rich@BadBitch:~$

That looks perfect! The "Installation has completed successfully" message means your EFI partition is no longer garbage‚Äîit's a clean, healthy filesystem with the bootloader properly linked to your motherboard's NVRAM.

Since refind-install automatically created a new refind_linux.conf, it should have detected your ZFS root parameters. However, because ZFS requires specific boot flags (like zfs=zpcachyos/ROOT/cos/root), let‚Äôs do one final "sanity check" to ensure you don't get stuck at a command prompt when you reboot.
1. Verify the ZFS Boot Parameters

Open the config file rEFInd just made:
Bash

cat /boot/refind_linux.conf

You want to see a line that mentions zfs=zpcachyos/ROOT/cos/root and rw. If the file looks like it's just generic or empty, rEFInd might not know where your ZFS pool is.
2. The Final "Green Light" Rebuild

Run this one last time. If this finishes without any "Input/output" or "Invalid option" errors, you are officially in the clear:
Bash

sudo mkinitcpio -P

What to expect on Reboot:

    The rEFInd Menu: You should see the rEFInd screen.

    Kernel Choice: Select the standard CachyOS kernel (the one we just reinstalled).

    The Driver: Once you're back at your desktop, the xpadneo driver will be active.

Final Step: GTA V

Once you're back in:

    Turn on your Xbox Controller.

    Open your browser to xbox.com/play.

    GTA V should now recognize your controller perfectly, with full analog trigger support for driving.

Is mkinitcpio -P looking clean now? If so, give that machine a reboot‚Äîyou've earned some Los Santos time after all that terminal troubleshooting!
You said

rich@BadBitch:~$ sudo refind-install

ShimSource is none

Installing rEFInd on Linux....

ESP was found at /boot using vfat

Copied rEFInd binary files


Copying sample configuration file as refind.conf; edit this file to configure

rEFInd.


Creating new NVRAM entry

rEFInd is set as the default boot manager.

Creating //boot/refind_linux.conf; edit it to adjust kernel options.


Installation has completed successfully.


rich@BadBitch:~$ ls /boot/refind_linux.conf

/boot/refind_linux.conf

rich@BadBitch:~$ cat /boot/refind_linux.conf

"Boot with standard options"  "quiet nowatchdog splash nvidia-drm.modeset=1 rw root=ZFS=zpcachyos/ROOT/cos/root resume=UUID=61edab8a-a887-454e-96e7-ef2734009a7b"

"Boot to single-user mode"    "quiet nowatchdog splash nvidia-drm.modeset=1 rw root=ZFS=zpcachyos/ROOT/cos/root resume=UUID=61edab8a-a887-454e-96e7-ef2734009a7b single"

"Boot with minimal options"   "ro root="

rich@BadBitch:~$ sudo mkinitcpio -P

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos-lts.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos-lts -g /boot/initramfs-linux-cachyos-lts.img

==> Using drop-in configuration file: '10-chwd.conf'

==> Starting build: '6.18.13-2-cachyos-lts'

  -> Running build hook: [base]

  -> Running build hook: [udev]

  -> Running build hook: [autodetect]

  -> Running build hook: [microcode]

  -> Running build hook: [kms]

  -> Running build hook: [modconf]

  -> Running build hook: [block]

  -> Running build hook: [keyboard]

  -> Running build hook: [keymap]

  -> Running build hook: [consolefont]

==> WARNING: consolefont: no font found in configuration

  -> Running build hook: [plymouth]

  -> Running build hook: [zfs]

  -> Running build hook: [resume]

  -> Running build hook: [filesystems]

  -> Running build hook: [fsck]

==> Generating module dependencies

==> Creating zstd-compressed initcpio image: '/boot/initramfs-linux-cachyos-lts.img'

  -> Early uncompressed CPIO image generation successful

==> Initcpio image generation successful

==> Building image from preset: /etc/mkinitcpio.d/linux-cachyos.preset: 'default'

==> Using default configuration file: '/etc/mkinitcpio.conf'

  -> -k /boot/vmlinuz-linux-cachyos -g /boot/initramfs-linux-cachyos.img

==> Using drop-in configuration file: '10-chwd.conf'

==> Starting build: '6.19.3-2-cachyos'

  -> Running build hook: [base]

  -> Running build hook: [udev]

  -> Running build hook: [autodetect]

  -> Running build hook: [microcode]

  -> Running build hook: [kms]

  -> Running build hook: [modconf]

  -> Running build hook: [block]

  -> Running build hook: [keyboard]

  -> Running build hook: [keymap]

  -> Running build hook: [consolefont]

==> WARNING: consolefont: no font found in configuration

  -> Running build hook: [plymouth]

  -> Running build hook: [zfs]

  -> Running build hook: [resume]

  -> Running build hook: [filesystems]

  -> Running build hook: [fsck]

==> Generating module dependencies

==> Creating zstd-compressed initcpio image: '/boot/initramfs-linux-cachyos.img'

  -> Early uncompressed CPIO image generation successful

==> Initcpio image generation successful

rich@BadBitch:~$

That is exactly what we wanted to see! The Initcpio image generation successful messages confirm that your kernels are properly built, your ZFS hook is included, and‚Äîmost importantly‚Äîthe "Input/output" and "Invalid option" errors are gone.

Your refind_linux.conf also looks perfect: it‚Äôs pointing to the correct ZFS root (zpcachyos/ROOT/cos/root) and even has your Nvidia modesetting and resume UUID ready to go.
You are safe to reboot!

Once you restart:

    Select the CachyOS icon in the rEFInd menu.

    Verify the Controller: Since we installed xpadneo and it‚Äôs now properly baked into the system, your Xbox controller should pair and work with the correct button mappings immediately.

    Launch GTA V:

        Open your Chromium-based browser (Edge/Chrome/Brave).

        Head to xbox.com/play.

        Tip: If the game feels a bit laggy, remember to hit F11 for fullscreen. This helps the browser prioritize input from your controller.

One Final Tip for GTA V

Since you‚Äôre using Nvidia (I saw nvidia-drm.modeset=1 in your config), if you notice any "screen tearing" while playing in the browser, you can go to your browser settings and ensure Hardware Acceleration is turned ON.

On CachyOS, you can also run this to ensure your Nvidia card is handling the video decoding for the stream:
Bash

nvidia-smi

If you see your browser listed there while the game is running, you're getting the best possible performance.

Enjoy Los Santos! Would you like me to show you how to create a dedicated "Game Mode" desktop shortcut for xCloud so you don't have to open the full browser every time?
Google Privacy Policy Opens in a new window
Google Terms of Service Opens in a new window
Your privacy & Gemini Apps Opens in a new window

Gemini may display inaccurate info, including about people, so double-check its responses.
Continue where they left off
You can add this chat to your own account to continue to create something new

  -> Running build hook: [microcode]

  -> Running build hook: [kms]

  -> Running build hook: [modconf]

  -> Running build hook: [block]

  -> Running build hook: [keyboard]

  -> Running build hook: [keymap]

  -> Running build hook: [consolefont]

==> WARNING: consolefont: no font found in configuration

  -> Running build hook: [plymouth]

  -> Running build hook: [zfs]

  -> Running build hook: [resume]

  -> Running build hook: [filesystems]

  -> Running build hook: [fsck]

==> Generating module dependencies

==> Creating zstd-compressed initcpio image: '/boot/initramfs-linux-cachyos.img'

  -> Early uncompressed CPIO image generation successful

==> Initcpio image generation successful

rich@BadBitch:~$

That is exactly what we wanted to see! The Initcpio image generation successful messages confirm that your kernels are properly built, your ZFS hook is included, and‚Äîmost importantly‚Äîthe "Input/output" and "Invalid option" errors are gone.

Your refind_linux.conf also looks perfect: it‚Äôs pointing to the correct ZFS root (zpcachyos/ROOT/cos/root) and even has your Nvidia modesetting and resume UUID ready to go.
You are safe to reboot!

Once you restart:

    Select the CachyOS icon in the rEFInd menu.

    Verify the Controller: Since we installed xpadneo and it‚Äôs now properly baked into the system, your Xbox controller should pair and work with the correct button mappings immediately.

    Launch GTA V:

        Open your Chromium-based browser (Edge/Chrome/Brave).

        Head to xbox.com/play.

        Tip: If the game feels a bit laggy, remember to hit F11 for fullscreen. This helps the browser prioritize input from your controller.

One Final Tip for GTA V

Since you‚Äôre using Nvidia (I saw nvidia-drm.modeset=1 in your config), if you notice any "screen tearing" while playing in the browser, you can go to your browser settings and ensure Hardware Acceleration is turned ON.

On CachyOS, you can also run this to ensure your Nvidia card is handling the video decoding for the stream:
Bash

nvidia-smi

If you see your browser listed there while the game is running, you're getting the best possible performance.

Enjoy Los Santos! Would you like me to show you how to create a dedicated "Game Mode" desktop shortcut for xCloud so you don't have to open the full browser every time?
Google Privacy Policy Opens in a new window
Google Terms of Service Opens in a new window
Your privacy & Gemini Apps Opens in a new window

Gemini may display inaccurate info, including about people, so double-check its responses.
