# Storage controllers — required for the initramfs to see any block device
# (USB stick, NVMe, SATA) before the squashfs is mounted. Without these,
# /dev has no disk entries and the ISO label search fails immediately.
MODULES=(ahci xhci_hcd xhci_pci usb_storage sd_mod nvme nvme_core uas)

# memdiskfind — called by the archiso hook init script; belt-and-suspenders
# inclusion in case mkinitcpio-archiso's _install() misses it on CachyOS
BINARIES=(memdiskfind)

FILES=()

# archiso + archiso_loop_mnt are required for the live environment to boot.
# They tell the initramfs how to find and mount the squashfs airootfs image.
# Without these hooks initrd-switch-root.service fails ("Cannot open access
# to console, the root account is locked" in emergency mode).
HOOKS=(base udev memdisk archiso archiso_loop_mnt)
